<div class="users-container">
  <div class ="users-header">
    <h2>Lista de usuarios</h2>
    <form class="search-form">

      <mat-form-field class="filter-input">
        <mat-label>Buscar email corporativo</mat-label>
        <input
          matInput
          placeholder="pat@example.com"
          name="corporateMail"
          [(ngModel)]="user.corporateMail"
          (ngModelChange)="applyFilters()" />
      </mat-form-field>

      <mat-form-field class="filter-input">
        <mat-label>Filtrar por rol</mat-label>
        <mat-select [(ngModel)]="selectedRoleId" name="roleId" (selectionChange)="applyFilters()">
          <mat-option [value]="null">Todos</mat-option>
          <mat-option [value]="rol.id" *ngFor="let rol of roles">{{ rol.rol }}</mat-option>
        </mat-select>
      </mat-form-field>      

    </form>
  </div>
  <div class="mat-elevation-z8 table-container">
    <table mat-table [dataSource]="dataSource">

      <ng-container matColumnDef="Mail corporativo">
        <th mat-header-cell *matHeaderCellDef> Correo corporativo</th>
        <td mat-cell *matCellDef="let user"> {{user.corporateMail}} </td>
      </ng-container>

      <ng-container matColumnDef="Nombre completo">
        <th mat-header-cell *matHeaderCellDef> Nombre completo </th>
        <td mat-cell *matCellDef="let user"> {{user.name + " " + user.lastname}} </td>
      </ng-container>

      <ng-container matColumnDef="Rol">
        <th mat-header-cell *matHeaderCellDef> Rol </th>
        <td mat-cell *matCellDef="let user"> {{user.role.rol}} </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="openDialog(row)"></tr>
    </table>
  
    <mat-paginator [pageSizeOptions]="[7]" showFirstLastButtons></mat-paginator>
  </div>
</div>